(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(16),c=n.n(a),u=n(4),o=n(0),s=function(e){var t=e.persons,n=e.deletePerson;return t.map((function(e){return Object(o.jsxs)("p",{children:[e.name," : ",e.number," "," ",Object(o.jsx)("button",{onClick:function(){return n(e.id)},children:"Delete"})]},e.id)}))},i=function(e){var t=e.addPerson,n=e.data;return Object(o.jsxs)("form",{onSubmit:t,children:[Object(o.jsxs)("div",{children:["Name ",Object(o.jsx)("input",{value:n.newName,onChange:n.handleNameChange})]}),Object(o.jsxs)("div",{children:["Number ",Object(o.jsx)("input",{value:n.newNumber,onChange:n.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"Add"})})]})},d=function(e){var t=e.value,n=e.onChange;return Object(o.jsxs)("p",{children:["Filter shown with ",Object(o.jsx)("input",{value:t,onChange:n})]})},l=function(e){var t=e.message;return null===t?null:Object(o.jsx)("div",{className:t.type,children:t.text})},f=n(3),p=n.n(f),b=n(5),j=n(6),h=n.n(j),m="/api/persons",v={getAll:function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.a.get("".concat(m)),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPerson:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.post(m,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.a.put("".concat(m,"/").concat(t),n),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.delete("".concat(m,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){v.getAll().then((function(e){a(e)}))}),[]);var c=Object(r.useState)(""),f=Object(u.a)(c,2),p=f[0],b=f[1],j=Object(r.useState)(""),h=Object(u.a)(j,2),m=h[0],x=h[1],O=Object(r.useState)(""),w=Object(u.a)(O,2),g=w[0],y=w[1],N=Object(r.useState)(""),k=Object(u.a)(N,2),C=k[0],P=k[1],S=n;g&&(S=n.filter((function(e){return 0===g.localeCompare(e.name,void 0,{sensitivity:"accent"})})));var T={newName:p,newNumber:m,handleNameChange:function(e){b(e.target.value)},handleNumberChange:function(e){x(e.target.value)}};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(l,{message:C}),Object(o.jsx)(d,{value:g,onChange:function(e){y(e.target.value)}}),Object(o.jsx)("h2",{children:"Add a new person"}),Object(o.jsx)(i,{addPerson:function(e){e.preventDefault();var t={name:p.trim(),number:m.trim()};if(n.some((function(e){return e.name===t.name}))){var r=window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?")),c=n.filter((function(e){return e.name===t.name}))[0].id;r&&v.updatePerson(c,t).then((function(e){a(n.map((function(t){return t.id===e.id?e:t}))),P({text:"Edited ".concat(e.name),type:"success"}),setTimeout((function(){P(null)}),3e3)})).catch((function(e){P({text:e.response.data.error,type:"error"}),setTimeout((function(){P(null)}),3e3)}))}else v.createPerson(t).then((function(e){a(n.concat(e)),P({text:"Added ".concat(e.name),type:"success"}),setTimeout((function(){P(null)}),3e3)})).catch((function(e){P({text:e.response.data.error,type:"error"}),setTimeout((function(){P(null)}),3e3)}));b(""),x("")},data:T}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(s,{persons:S,deletePerson:function(e){n.some((function(e){return null===e}))?window.alert("".concat(e," has already been deleted")):v.deletePerson(e).then((function(){a(n.filter((function(t){return t.id!==e}))),P({text:"Deleted ".concat(e),type:"success"}),setTimeout((function(){P(null)}),3e3)})).catch((function(e){P({text:e.response.data.error,type:"error"}),setTimeout((function(){P(null)}),3e3)}))}})]})};n(41);c.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.92652ed2.chunk.js.map